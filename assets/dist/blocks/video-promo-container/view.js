!function(){const e=e=>{const t=document.querySelector(".global-header")||document.querySelector("header"),n=t?t.getBoundingClientRect().height:0,i=Math.max(0,window.innerHeight-n);e.style.objectFit="contain",e.style.maxHeight=`${i}px`;const o=()=>{if(!e.videoWidth||!e.videoHeight)return;const t=e.getBoundingClientRect().width;if(!t)return;const n=t*(e.videoHeight/e.videoWidth),o=Math.min(n,i);e.style.height=`${o}px`};o(),e.videoWidth&&e.videoHeight||e.addEventListener("loadedmetadata",o,{once:!0})};document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".wp-block-shiro-video-promo-container").forEach(t=>{t.querySelectorAll("video").forEach(n=>{if(!n)return;e(n),window.addEventListener("resize",()=>e(n)),n.addEventListener("play",()=>(e=>{e.autoplay||setTimeout(()=>{const t=document.querySelector(".global-header")||document.querySelector("header"),n=t?t.getBoundingClientRect().height:0,i=e.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:Math.max(0,i-n),behavior:"smooth"})},100)})(n)),n.addEventListener("ended",()=>(e=>{e.src="",e.src=e.currentSrc})(n));const i=((e,t)=>{if("true"!==t.dataset.enableProgressBar)return null;const n=document.createElement("div");n.className="progress-bar-container";const i=document.createElement("div");return i.className="progress-bar",n.appendChild(i),e.after(n),i})(n,t);i&&(n.addEventListener("timeupdate",()=>((e,t)=>{const n=e.duration;if(!Number.isFinite(n)||n<=0)return;const i=e.currentTime/n*100;t.style.width=`${Math.min(100,Math.max(0,i))}%`})(n,i)),n.addEventListener("ended",()=>(e=>{e.style.width="0%"})(i)),n.addEventListener("play",()=>(e=>{e.style.transition="width 0.5s linear"})(i)),n.addEventListener("pause",()=>(e=>{e.style.transition="none"})(i)))})})})}();