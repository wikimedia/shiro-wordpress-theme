!function(){const e=e=>{const t=document.querySelector(".global-header")||document.querySelector("header"),n=t?t.getBoundingClientRect().height:0,r=document.getElementById("wpadminbar"),i=r?r.getBoundingClientRect().height:0,o=Math.max(0,window.innerHeight-n-i);e.style.objectFit="contain",e.style.maxHeight=`${o}px`;const d=()=>{if(!e.videoWidth||!e.videoHeight)return;const t=e.getBoundingClientRect().width;if(!t)return;const n=t*(e.videoHeight/e.videoWidth),r=Math.min(n,o);e.style.height=`${r}px`};d(),e.videoWidth&&e.videoHeight||e.addEventListener("loadedmetadata",d,{once:!0})};document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".wp-block-shiro-video-promo-container").forEach(t=>{t.querySelectorAll("video").forEach(n=>{if(!n)return;e(n),window.addEventListener("resize",()=>e(n)),n.addEventListener("play",()=>(e=>{e.autoplay||setTimeout(()=>{const t=document.querySelector(".global-header")||document.querySelector("header"),n=t?t.getBoundingClientRect().height:0,r=e.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:Math.max(0,r-n),behavior:"smooth"})},100)})(n)),n.addEventListener("ended",()=>(e=>{e.src="",e.src=e.currentSrc})(n));const r=((e,t)=>{if("true"!==t.dataset.enableProgressBar)return null;const n=document.createElement("div");n.className="progress-bar-container";const r=document.createElement("div");return r.className="progress-bar",n.appendChild(r),e.after(n),r})(n,t);r&&(n.addEventListener("timeupdate",()=>((e,t)=>{console.log("Progress bar update:",{duration:e.duration,currentTime:e.currentTime,progress:e.duration>0?e.currentTime/e.duration*100:0});const n=e.duration;if(!Number.isFinite(n)||n<=0)return;const r=e.currentTime/n*100;t.style.width=`${Math.min(100,Math.max(0,r))}%`})(n,r)),n.addEventListener("ended",()=>(e=>{e.style.width="0%"})(r)),n.addEventListener("play",()=>(e=>{e.style.transition="width 0.5s linear"})(r)),n.addEventListener("pause",()=>(e=>{e.style.transition="none"})(r)))})})})}();