!function(){const e=(e,t)=>{const n=(e=>{const{videoWidth:t,videoHeight:n}=e,{width:i,height:d}=e.parentElement.getBoundingClientRect(),o=t/n;return o>i/d?{width:i,height:i/o}:{width:d*o,height:d}})(e);if(n){const i=(e.getBoundingClientRect().width-n.width)/2;t.style.left=`${i}px`,t.style.width=`${n.width}px`}},t=e=>{const t=document.querySelector(".global-header")||document.querySelector("header"),n=t?t.getBoundingClientRect().height:0,i=Math.max(0,window.innerHeight-n);e.style.maxHeight=`${i}px`;const d=()=>{if(!e.videoWidth||!e.videoHeight)return;const t=e.getBoundingClientRect().width;if(!t)return;const n=t*(e.videoHeight/e.videoWidth),d=Math.min(n,i);e.style.height=`${d}px`};d(),e.videoWidth&&e.videoHeight||e.addEventListener("loadedmetadata",d,{once:!0})};document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".wp-block-shiro-video-promo-container").forEach(n=>{n.querySelectorAll("video").forEach(i=>{if(!i)return;t(i),i.style.objectFit="cover",window.addEventListener("resize",()=>t(i)),i.addEventListener("play",()=>(e=>{e.autoplay||setTimeout(()=>{const t=document.querySelector(".global-header")||document.querySelector("header"),n=t?t.getBoundingClientRect().height:0,i=e.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:Math.max(0,i-n),behavior:"smooth"})},100)})(i)),i.addEventListener("play",()=>(e=>{e.style.objectFit="contain"})(i)),i.addEventListener("ended",()=>(e=>{e.src="",e.src=e.currentSrc,e.style.objectFit="cover"})(i));const d=((t,n)=>{if("true"!==n.dataset.enableProgressBar)return null;const i=document.createElement("div");i.className="progress-bar-container";const d=document.createElement("div");return d.className="progress-bar",i.appendChild(d),t.after(i),e(t,i),window.addEventListener("resize",()=>e(t,i)),d})(i,n);d&&(i.addEventListener("timeupdate",()=>((e,t)=>{const n=e.duration;if(!Number.isFinite(n)||n<=0)return;const i=e.currentTime/n*100;t.style.width=`${Math.min(100,Math.max(0,i))}%`})(i,d)),i.addEventListener("ended",()=>(e=>{e.style.width="0%"})(d)),i.addEventListener("play",()=>(e=>{e.style.transition="width 0.5s linear"})(d)),i.addEventListener("pause",()=>(e=>{e.style.transition="none"})(d)))})})})}();