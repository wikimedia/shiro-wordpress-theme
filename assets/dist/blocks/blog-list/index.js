!function(){"use strict";var e,r={1367:function(e,r,t){var n=window.wp.blocks,o=window.wp.apiFetch,s=t.n(o),i=window.wp.blockEditor,u=window.wp.components,a=window.wp.element,c=window.wp.i18n,d=window.wp.serverSideRender,l=t.n(d),p=window.wp.url,f=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"shiro/blog-list","title":"Blog list","textdomain":"shiro-admin","category":"wikimedia","icon":"list-view","description":"Dynamic list of recent posts","attributes":{"postsToShow":{"type":"integer","default":2},"categories":{"type":"array","items":{"type":"object"}},"excludedCategories":{"type":"array","items":{"type":"object"}},"order":{"type":"string","default":"desc"},"orderBy":{"type":"string","default":"date"},"selectedAuthor":{"type":"number"}},"editorScript":"file:./index.js","editorStyle":"file:./style-index.css","render":"file:./render.php"}'),g=window.ReactJSXRuntime;(0,n.registerBlockType)(f.name,{...f,edit:function({attributes:e,setAttributes:r}){const{postsToShow:t,categories:n,excludedCategories:o,order:d,orderBy:h,selectedAuthor:w}=e,m=(0,i.useBlockProps)({className:"blog-list"}),[y,v]=(0,a.useState)([]),[b,x]=(0,a.useState)([]),C=b.reduce((e,r)=>({...e,[r.name]:r}),{}),[O,j]=(0,a.useState)([]),k=O.reduce((e,r)=>({...e,[r.name]:r}),{}),S=(e,r)=>t=>{if(t.some(r=>"string"==typeof r&&!e[r]))return;const n=t.map(r=>"string"==typeof r?e[r]:r);if(n.includes(null))return!1;r(n)},_=(0,a.useRef)();return(0,a.useEffect)(()=>(_.current=!0,s()({path:(0,p.addQueryArgs)("/wp/v2/categories",{per_page:-1})}).then(e=>{_.current&&(x(e),j(e))}).catch(()=>{_.current&&(x([]),j([]))}),s()({path:(0,p.addQueryArgs)("/wp/v2/users",{per_page:-1})}).then(e=>{_.current&&v(e)}).catch(()=>{_.current&&v([])}),()=>{_.current=!1}),[]),(0,g.jsxs)("div",{...m,children:[(0,g.jsx)(i.InspectorControls,{children:(0,g.jsx)(u.PanelBody,{title:(0,c.__)("Sorting and filtering"),children:(0,g.jsx)(u.QueryControls,{order:d,orderBy:h,authorList:y,categorySuggestions:C,numberOfItems:t,selectedAuthorId:w,selectedCategories:n,onAuthorChange:e=>r({selectedAuthor:""!==e?Number(e):void 0}),onCategoryChange:S(C,e=>r({categories:e})),onNumberOfItemsChange:e=>r({postsToShow:e}),onOrderByChange:e=>r({orderBy:e}),onOrderChange:e=>r({order:e})})})}),(0,g.jsx)(i.InspectorAdvancedControls,{children:(0,g.jsx)(u.FormTokenField,{label:(0,c.__)("Excluded Categories"),maxSuggestions:20,suggestions:Object.keys(k),value:o&&o.map(e=>({id:e.id,value:e.name||e.value})),onChange:S(k,e=>r({excludedCategories:e}))},"query-controls-categories-select")}),(0,g.jsx)(l(),{attributes:e,block:f.name})]})},save:function(){return null}})}},t={};function n(e){var o=t[e];if(void 0!==o)return o.exports;var s=t[e]={exports:{}};return r[e](s,s.exports,n),s.exports}n.m=r,e=[],n.O=function(r,t,o,s){if(!t){var i=1/0;for(d=0;d<e.length;d++){t=e[d][0],o=e[d][1],s=e[d][2];for(var u=!0,a=0;a<t.length;a++)(!1&s||i>=s)&&Object.keys(n.O).every(function(e){return n.O[e](t[a])})?t.splice(a--,1):(u=!1,s<i&&(i=s));if(u){e.splice(d--,1);var c=o();void 0!==c&&(r=c)}}return r}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[t,o,s]},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,{a:r}),r},n.d=function(e,r){for(var t in r)n.o(r,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},function(){var e={452:0,156:0};n.O.j=function(r){return 0===e[r]};var r=function(r,t){var o,s,i=t[0],u=t[1],a=t[2],c=0;if(i.some(function(r){return 0!==e[r]})){for(o in u)n.o(u,o)&&(n.m[o]=u[o]);if(a)var d=a(n)}for(r&&r(t);c<i.length;c++)s=i[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(d)},t=self.webpackChunkshiro_wordpress_theme=self.webpackChunkshiro_wordpress_theme||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))}();var o=n.O(void 0,[156],function(){return n(1367)});o=n.O(o)}();