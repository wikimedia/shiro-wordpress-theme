document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".share-button"),t=document.querySelectorAll(".share-options"),o=document.querySelectorAll(".copy-link"),n=document.querySelectorAll(".copy-feedback");e.forEach((e,a)=>{const c=t[a],r=o[a],s=n[a],i=c.querySelectorAll(".share-option");function d(){e.setAttribute("aria-expanded","false"),c.hidden=!0}e.addEventListener("click",()=>{const t="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",!t),c.hidden=t,t||e.focus()}),document.addEventListener("click",t=>{e.contains(t.target)||c.contains(t.target)||d()}),e.addEventListener("keydown",e=>{"ArrowDown"===e.key&&(e.preventDefault(),i[0].focus())}),i.forEach((t,o)=>{t.addEventListener("keydown",t=>{if("ArrowDown"===t.key){t.preventDefault();const e=(o+1)%i.length;i[e].focus()}else if("ArrowUp"===t.key){t.preventDefault();const e=(o-1+i.length)%i.length;i[e].focus()}else"Escape"===t.key&&(d(),e.focus())})}),r&&r.addEventListener("click",()=>{const e=window.location.href;navigator.clipboard.writeText(e).then(()=>{s.hidden=!1,setTimeout(()=>{s.hidden=!0},2e3)}).catch(e=>{console.error("Failed to copy link: ",e)})})})}),function(){"use strict";var e=document.getElementById("page"),t="blackout-modal",o=document.querySelector(".blackout-modal"),n=document.querySelector(".close-blackout-modal"),a=o?o.dataset.cookie:null;o&&(document.cookie.match("(^|[^;]+)\\s*"+a+"\\s*=\\s*([^;]+)")||(o.className=t+" opened",n.focus(),e.setAttribute("aria-hidden",!0)),n.addEventListener("click",function(){var n,c;(c=new Date).setTime(c.getTime()+2592e6),n=";expires="+c.toUTCString(),document.cookie=a+"=true;path=/"+n,o.className=t,e.setAttribute("aria-hidden",!1)}))}(),function(e){"use strict";e("#searchFilter").on("submit",function(t){t.preventDefault();var o=e("#sortSelect :selected"),n=e(o).val(),a=e(o).data("type"),c={s:e("#keyword").val(),order:n,orderby:a};c.post_type=e("#searchFilter input:checkbox:checked").map(function(){return e(this).val()}).get()||[],function(t){var o=t||{};(function(t){var o=t||{},n=window.location,a=n.protocol+"//"+n.host+"/",c=decodeURIComponent(e.param(o));window.history.pushState("","",a+"?"+c)})(t),o.action="ajax_search",e("#search-results").css({opacity:.5}),e.ajax({type:"POST",url:shiro.ajax_url,data:o,success:function(t){var o=t.data||{};o.posts_html&&e("#search-results").empty().append(o.posts_html),o.pagination&&e("#pagination").empty().append(o.pagination),""===o.pagination&&e("#pagination").empty(),e("#search-results").css({opacity:1})},error:function(){e("#search-results").empty(),e("#pagination").empty(),e("#search-results").css({opacity:1})}})}(c)})}(jQuery);