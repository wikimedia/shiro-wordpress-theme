document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".share-button"),t=document.querySelectorAll(".share-options"),n=document.querySelectorAll(".copy-link"),o=document.querySelectorAll(".copy-feedback");e.forEach((function(e,a){var r=t[a],c=n[a],i=o[a],s=r.querySelectorAll(".share-option");function u(){e.setAttribute("aria-expanded","false"),r.hidden=!0}e.addEventListener("click",(function(){var t="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",!t),r.hidden=t,t||e.focus()})),document.addEventListener("click",(function(t){e.contains(t.target)||r.contains(t.target)||u()})),e.addEventListener("keydown",(function(e){"ArrowDown"===e.key&&(e.preventDefault(),s[0].focus())})),s.forEach((function(t,n){t.addEventListener("keydown",(function(t){if("ArrowDown"===t.key){t.preventDefault();var o=(n+1)%s.length;s[o].focus()}else if("ArrowUp"===t.key){t.preventDefault();var a=(n-1+s.length)%s.length;s[a].focus()}else"Escape"===t.key&&(u(),e.focus())}))})),c&&c.addEventListener("click",(function(){var e=window.location.href;navigator.clipboard.writeText(e).then((function(){i.hidden=!1,setTimeout((function(){i.hidden=!0}),2e3)})).catch((function(e){console.error("Failed to copy link: ",e)}))}))}))})),function(){"use strict";var e=document.getElementById("page"),t="blackout-modal",n=document.querySelector(".blackout-modal"),o=document.querySelector(".close-blackout-modal"),a=n?n.dataset.cookie:null;n&&(document.cookie.match("(^|[^;]+)\\s*"+a+"\\s*=\\s*([^;]+)")||(n.className=t+" opened",o.focus(),e.setAttribute("aria-hidden",!0)),o.addEventListener("click",(function(){var o,r;(r=new Date).setTime(r.getTime()+2592e6),o=";expires="+r.toUTCString(),document.cookie=a+"=true;path=/"+o,n.className=t,e.setAttribute("aria-hidden",!1)})))}(),function(e){"use strict";e("#searchFilter").on("submit",(function(t){t.preventDefault();var n=e("#sortSelect :selected"),o=e(n).val(),a=e(n).data("type"),r={s:e("#keyword").val(),order:o,orderby:a};r.post_type=e("#searchFilter input:checkbox:checked").map((function(){return e(this).val()})).get()||[],function(t){var n=t||{};(function(t){var n=t||{},o=window.location,a=o.protocol+"//"+o.host+"/",r=decodeURIComponent(e.param(n));window.history.pushState("","",a+"?"+r)})(t),n.action="ajax_search",e("#search-results").css({opacity:.5}),e.ajax({type:"POST",url:shiro.ajax_url,data:n,success:function(t){var n=t.data||{};n.posts_html&&e("#search-results").empty().append(n.posts_html),n.pagination&&e("#pagination").empty().append(n.pagination),""===n.pagination&&e("#pagination").empty(),e("#search-results").css({opacity:1})},error:function(){e("#search-results").empty(),e("#pagination").empty(),e("#search-results").css({opacity:1})}})}(r)}))}(jQuery);