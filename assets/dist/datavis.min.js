jQuery(document).ready((function(t){"use strict";t(".d3-linechart").each((function(){!function(a){var e=t("#"+a),r=t(window).width()<762,n=r?20:60,l=e.width(),i=l-40-n,c=300,o=e.data("stroke-color"),u="month"===e.data("time-format")?{month:"long"}:{month:"short",day:"numeric",year:"numeric"},s=d3.timeParse("%Y-%m-%d"),d=e.data("chart-raw"),f=d?d.map((function(t){return t.date=s(t.date),t})):null;function h(t,a,e,r){if(!a)return t.style("display","none");t.attr("class","tooltip").style("display",null).style("pointer-events","none");var n=t.selectAll("rect").data([null]).join("rect").attr("rx",2).attr("ry",2),l=t.selectAll("text").data([null]).join("text").call((function(t){return t.selectAll("tspan").data(a.split(/\n/)).join("tspan").attr("x",0).attr("y",(function(t,a){return 1.2*a+"em"})).style("font-weight",(function(t,a){return a?null:"bold"})).text((function(t){return t}))})),c=l.node().getBBox(),o=c.width,u=c.height,s=20;return t.selectAll("circle").data([null]).join("circle").attr("r",4).attr("stroke-width",1.5).attr("fill",r?"none":"white"),n.attr("width",o+s).attr("height",u+s),e+o>i?(l.attr("transform","translate("+(-o-s)+","+-((u-s)/2-2)+")"),n.attr("x",-(o+10+s)).attr("y",-(u+s)/2)):(l.attr("transform","translate(20,"+-((u-s)/2-2)+")"),n.attr("x",10).attr("y",-(u+s)/2)),t}!function(){if(f){var e,n,s=d3.scaleTime().nice().domain(d3.extent(f,(function(t){return t.date}))).range([0,i]),d=d3.scaleLinear().domain([0,d3.max(f,(function(t){return t.value}))]).range([210,0]),x=d3.select("#"+a),y=l/c;e=x.append("svg").attr("width",l).attr("height",c).attr("perserveAspectRatio","xMidYMid meet").attr("viewBox","0 0 "+l+" "+c).append("g").attr("transform","translate(40,30)"),t(window).resize((function(){var t=x.node().getBoundingClientRect().width;x.selectAll("svg").attr("width",t),x.selectAll("svg").attr("height",t/y)})),e.append("g").call((function(t){t.attr("transform","translate(0,210)").call(d3.axisBottom(s).ticks(d3.timeMonth,1).tickFormat(r?d3.timeFormat("%b"):d3.timeFormat("%B"))).call((function(t){t.select(".domain").remove()}))})),e.append("g").call((function(t){t.attr("class","yAxis").call(d3.axisLeft(d).ticks(4).tickFormat(d3.format(".2s")).tickSize(-1*i)).call((function(t){t.select(".domain").remove()}))})),e.append("path").datum(f).attr("fill","none").attr("stroke-width",1.5).attr("stroke","black").attr("class","line "+o).attr("d",d3.line().x((function(t){return s(t.date)})).y((function(t){return d(t.value)}))),e.append("g").selectAll("circle").data(f.filter((function(t){return t.event}))).enter("circle").append("circle").attr("class","circle "+o).attr("r",4).attr("cx",(function(t){return s(t.date)})).attr("cy",(function(t){return d(t.value)})),n=e.append("g"),e.append("rect").attr("class","overlay").attr("pointer-events","all").attr("x",0).attr("y",0).attr("width",i).attr("height",210).on("touchmove mousemove",(function(){var a,e,r,l,i,c,o=(a=d3.mouse(this)[0],e=d3.bisector((function(t){return t.date})).left,r=s.invert(a),l=e(f,r,1),i=f[l-1],c=f[l],r-i.date>c.date-r?c:i),x=o.date.toLocaleString(void 0,u)+"\n"+d3.format(",")(o.value);n.attr("transform","translate("+s(o.date)+","+d(o.value)+")").call(h,x,s(o.date),o.event),o.event?(t("#label-date").text(o.date.toLocaleString(void 0,u)),t("#label-name").text(o.event),t("#linechart-label").css("opacity",1),t("#linechart-label").css("max-height","10rem")):(t("#linechart-label").css("opacity",0),t("#linechart-label").css("max-height","2rem"))})).on("touchend mouseleave",(function(){n.call(h,null)}))}}()}(this.id)}))})),jQuery(document).ready((function(t){"use strict";t(".d3-dataprofiles").each((function(){!function(a){var e=t("#"+a),r=10,n=d3.format(","),l=e.width(),i={x:l<380?l/2-r:190,y:125},c=e.data("max-feature-1")?e.data("max-feature-1"):90,o=e.data("max-feature-2")?e.data("max-feature-2"):90,u=Math.max(Math.floor(l/i.x),2),s=t("body").width(),d=190*u,f=500,h=e.data("chart-masterunit")?e.data("chart-masterunit"):5e5,x=l<d?24:30,y=e.data("chart-raw"),p=e.data("slice-start"),m=e.data("slice-end"),g=e.data("chart-labels"),v=e.data("chart-icons"),w=e.data("chart-except"),A=w?y[g[0]]:"",b=3.5,k=w?i.y*b:j(0,m-p-1)+i.y;function j(t,a){return(w?0:50)+(i.y+60)*Math.floor(a/u)}function M(t,a){return a%u*i.x}function B(t,a,e,r){return parseFloat(t.selectAll(a).nodes()[e].getAttribute(r))}!function(){if(y){var e,u,L,P,R,F=d3.select("#"+a),z=[t("#feature1"),t("#feature2"),t("#feature3")],C=l/k,S=y.map((function(t,a){var e=Math.floor(t[g[3]]/h),r=t[g[3]]%h,n=0===a?x:5,l=Math.ceil(e/n);t.unitArray=[];for(var i=0;i<l;i++)for(var c=0;c<n;c++)t.unitArray.push({x:c,y:i,value:h});return t.unitArray=t.unitArray.slice(0,e),t.unitArray[t.unitArray.length-1].value=r,t.Rows=l,t})),Y=S.slice(p,m),I=d3.max(S,(function(t){return t.Rows})),O=d3.scaleLinear().domain([0,d3.max(y,(function(t){return t[g[1]]}))]).range([0,c]),Q=d3.scaleLinear().domain([0,d3.max(y,(function(t){return t[g[2]]}))]).range([0,o]),T=d3.scaleLinear().domain([0,h]).range([0,4]),q=d3.scaleLinear().domain([0,I]).range([0,4*I*2]),D=d3.scaleLinear().domain([0,5]).range([0,50]),E=2*O.range()[1]+q.range()[1]+220;b=(k=w&&k<E?E:k)/i.y,e=F.append("svg").attr("width",l).attr("height",k).attr("perserveAspectRatio","xMidYMid meet").attr("viewBox","0 0 "+l+" "+k),t(window).resize((function(){var t=F.node().getBoundingClientRect().width;F.selectAll("svg").attr("width",t),F.selectAll("svg").attr("height",t/C)})),u=e.append("g").call((function(t){return t.attr("transform","translate(10,10)").attr("class","profile-feature1").selectAll("circle").data(Y).join("circle").attr("cx",(function(t,a){return w?M(0,a)+Math.max(l/4,O(t[g[1]])+r):M(0,a)+O(t[g[1]])})).attr("cy",(function(t,a){return j(0,a)+O(t[g[1]])})).attr("r",(function(t){return O(t[g[1]])}))})),L=e.append("g").call((function(t,a){return t.attr("transform","translate(10,10)").attr("class","profile-feature2").selectAll("rect").data(Y).join("rect").attr("x",(function(t,e){var r=B(a,"circle",e,"cx")+B(a,"circle",e,"r")+5,n=.4*l+(l/2-.75*Q(t[g[2]]))/2,i=w?n:r,c=B(a,"circle",e,"cx")+B(a,"circle",e,"r")+30;return l<d&&w?c:i})).attr("y",(function(t,a){return j(0,a)})).attr("width",(function(t){return.75*Q(t[g[2]])})).attr("height",(function(t){return Q(t[g[2]])})).attr("rx",(function(t){return.08*Q(t[g[2]])})).attr("ry",(function(t){return.08*Q(t[g[2]])}))}),u),P=e.append("g").call((function(t,a,e){t.attr("class","profile-feature3");for(var n=0;n<Y.length;n++){var i=T(h)/3*2,c=B(e,"rect",n,"x")+B(e,"rect",n,"width")+r,o=B(e,"rect",n,"y")+i,u=(l-D(x))/2,s=B(a,"circle",n,"cx")+B(a,"circle",n,"r")+45+20,d=w?u:c,f=w?s:o;t.append("g").attr("class","viewsContainer").attr("transform","translate(10,10)").selectAll("ellipse").data(Y[n].unitArray).join("ellipse").attr("class","views-"+n).attr("cx",(function(t){return d+D(t.x)})).attr("cy",(function(t){return f+q(t.y)})).attr("rx",(function(t){return T(t.value)})).attr("ry",(function(t){return T(t.value)/3*2}))}return t}),u,L),e.append("g").call((function(t,a,e){var n=w?r*b+r:20,l=w?k-r:.75*i.y+r;return t.call((function(t){return t.append("g").attr("class","main-labels").selectAll("text").data(Y).join("text").attr("text-anchor","start").attr("dy",-5).attr("x",(function(t,a){return s<f?M(0,a)+r:M(0,a)+n})).attr("y",(function(t,a){return j(0,a)+l})).text((function(t){return g.length>4?t[g[4]]:t[g[0]]}))})).call((function(t){return t.append("g").attr("class","main-label-ranks").style("display","none").selectAll("text").data(Y).join("text").attr("text-anchor","start").attr("dy",-30).attr("x",(function(t,a){return s<f?M(0,a)+r:M(0,a)+n})).attr("y",(function(t,a){return j(0,a)+l})).text((function(t,a){return a+1+e}))}))}),u,p),e.append("g").call((function(t){var a=w?k:i.y-r,e=w?r*b:r;return t.attr("stroke-width",2).attr("class","borderleft").selectAll("line").data(Y).join("line").attr("x1",(function(t,a){return M(0,a)+2})).attr("x2",(function(t,a){return s<f?M(0,a)+2:M(0,a)+e})).attr("y1",(function(t,a){return j(0,a)})).attr("y2",(function(t,e){return j(0,e)+a}))})),w?e.append("g").call((function(t,a,e,l){var i,c,o=Y[0],u=B(e,"rect",0,"x"),s=B(e,"rect",0,"y"),d=B(e,"rect",0,"width"),f=B(e,"rect",0,"height"),y=B(l,"ellipse",x-1,"cx"),p=B(l,"ellipse",Math.floor(x/2)-1,"cx"),m=B(l,"ellipse",x*(o.Rows-1),"cy"),w=x*o.Rows%o.unitArray.length>Math.ceil(x/2)+1,A=[{x:B(a,"circle",0,"cx"),y:B(a,"circle",0,"cy")+B(a,"circle",0,"r")-r,y2:k-60,h:45,class:1,highlight:!0,name:[n(o[g[1]])+" "+g[1]]},{x:u+.5*d,y:s+f-r,y2:k-60,h:45,class:2,highlight:!0,name:[n(o[g[2]])+" "+g[2]]},{x:p,y:w?m:m+r,y2:k-90,h:45,class:3,highlight:!0,name:[n(o[g[3]])+" "+g[3]]},{x:y,y:m-2*T.range()[1],y2:k-120,h:22.5,class:3,highlight:!1,name:[n(h),g[3]]}];return t.append("g").attr("transform","translate(10,10)").attr("class","data-label-lines").selectAll("line").data(A).join("line").attr("class",(function(t){return"profile-feature"+t.class})).attr("x1",(function(t){return t.x})).attr("x2",(function(t){return t.x})).attr("y1",(function(t){return t.y})).attr("y2",(function(t){return t.y+t.h})).attr("stroke-dasharray",(function(t){return t.highlight?"":r/3+",2.5"})),(i=t.append("g").attr("transform","translate(10,10)").attr("class","data-label-text").selectAll("text").data(A).join("text").attr("class",(function(t){return"profile-feature"+t.class})).attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y+t.h})).attr("dy",15).attr("stroke-width",0).attr("font-weight",(function(t){return t.highlight?"bold":"normal"})).attr("text-anchor","middle")).append("tspan").attr("x",(function(t){return t.x})).attr("dx",T.range()[1]).text((function(t){return t.name[0]})),i.append("tspan").attr("x",(function(t){return t.x})).attr("dy",16).attr("dx",T.range()[1]).text((function(t){return t.name[1]})),c=t.append("g").attr("transform","translate(10,10)").attr("class","data-label-icon"),i.selectAll("tspan").each((function(t,a){if(0===a&&t.highlight){var e=this.getBBox().width;c.call((function(a){return a.append("image").attr("class","profile-feature"+t.class).attr("xlink:href",v[t.class-1]).attr("width",11).attr("height",11).attr("x",t.x-e/2-r).attr("y",t.y+t.h+5)}))}})),t}),u,L,P):(R=e.append("g").attr("class","tooltip"),e.append("g").attr("opacity",0).attr("class","tooltipgrid").selectAll("rect").data(Y).join("rect").attr("class","hover").attr("x",(function(t,a){return M(0,a)})).attr("y",(function(t,a){return j(0,a)})).attr("width",i.x).attr("height",i.y).on("touchstart mouseover",(function(t,a){Y[a][g[0]]!==A&&R.call(G,a,u,L,P)})).on("touchend mouseout",(function(){R.call(G,null)})),t(".chart-options input[type='checkbox']").click(H),H())}function G(t,a,e,c,o){if(null===a)return t.transition().attr("opacity",0).transition().style("display","none");var u=B(e,"circle",a,"cx"),h=B(c,"rect",a,"x"),x=B(c,"rect",a,"width"),y=B(o,".views-"+a,Math.min(Math.floor(2.5),Y[a].unitArray.length-1),"cx")+r,p=l<d?20:0,m=[{value:Y[a][g[1]],x:Math.round(u+r),y1:j(0,a)+r,h:36,labelPos:[u,j(0,a)-36]},{value:Y[a][g[2]],x:Math.round(h+r+x/2),y1:j(0,a)+r,h:21,labelPos:[h+x/2,j(0,a)-21]},{value:Y[a][g[3]],x:Math.round(y),y1:j(0,a)+2*T.range()[1],h:6,labelPos:[y-r-p,j(0,a)-6]}];return t.transition().attr("opacity",1).style("display",null).style("pointer-events","none"),t.selectAll("line").data(m).join("line").attr("class","hover-label-lines").attr("x1",(function(t){return t.x})).attr("x2",(function(t){return t.x})).attr("y1",(function(t){return t.y1})).attr("y2",(function(t){return t.y1-t.h})).style("display",(function(t,a){return z[a].is(":checked")?"block":"none"})),t.selectAll("text").data(m).join("text").attr("x",(function(t){return t.labelPos[0]})).attr("y",(function(t){return t.labelPos[1]})).attr("dy",5).attr("dx",18).text((function(t){return n(t.value)})).style("display",(function(t,a){return z[a].is(":checked")?"block":"none"})),g.length>4&&t.append("text").attr("x",s<f?M(0,a):M(0,a)+r).attr("y",j(0,a)+i.y).attr("dy",-10).attr("dx",r).text(Y[a][g[0]]),t.selectAll("image").data(m).join("image").attr("xlink:href",(function(t,a){return v[a]})).attr("width",10).attr("height",10).attr("x",(function(t){return t.labelPos[0]+5})).attr("y",(function(t){return t.labelPos[1]-5})).style("display",(function(t,a){return z[a].is(":checked")?"block":"none"})),t}function H(){for(var a=0;a<z.length;a++){var e=t(".profile-feature"+(a+1));z[a].is(":checked")?e.fadeIn():e.fadeOut()}z[0].is(":checked")||z[1].is(":checked")||z[2].is(":checked")?t(".main-label-ranks").fadeOut():t(".main-label-ranks").fadeIn()}}()}(this.id)}))}));